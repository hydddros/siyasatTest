<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SiyasatPH | Official Security Portal</title>

    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#dc3545">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    
    <style>
        :root {
            --dswd-red: #a30000;
            --ph-blue: #0038a8;
            --gov-gray: #f2f2f2;
            --slate: #212529;
        }

        body { font-family: 'Arial', sans-serif; background-color: #fff; color: #333; margin: 0; padding: 0; }

        /* GOV.PH Bar */
        .gov-bar { background: var(--gov-gray); font-size: 11px; padding: 8px 0; border-bottom: 1px solid #ddd; }
        .gov-bar a { text-decoration: none; color: #333; font-weight: bold; margin-right: 15px; }

        /* Header Layout */
        .agency-header { padding: 15px 0; border-bottom: 5px solid var(--dswd-red); background: #fff; position: sticky; top: 0; z-index: 1000; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .agency-logo { font-weight: 900; font-size: 34px; color: var(--dswd-red); letter-spacing: -1px; line-height: 1; text-decoration: none; }
        .agency-sub { font-size: 12px; text-transform: uppercase; color: #666; font-weight: bold; display: block; white-space: nowrap; }

        /* Desktop Navigation Links */
        .desktop-nav { display: none; gap: 15px; margin-right: 15px; }
        .desktop-nav a { text-decoration: none; color: var(--slate); font-weight: 700; font-size: 12px; text-transform: uppercase; transition: 0.2s; white-space: nowrap; }
        .desktop-nav a:hover { color: var(--dswd-red); }

        /* Navigation Tools */
        .nav-tools { display: flex; gap: 5px; align-items: center; }
        .tool-btn { background: none; border: none; font-size: 22px; color: var(--slate); cursor: pointer; transition: 0.2s; padding: 8px; border-radius: 4px; display: flex; align-items: center; justify-content: center; }
        .tool-btn:hover { background: var(--gov-gray); color: var(--dswd-red); }

        @media (min-width: 768px) {
            .desktop-nav { display: flex; }
            .burger-menu-btn { display: none !important; }
        }

        /* Hidden Search Bar Toggle */
        #searchWrapper { display: none; background: #fff; padding: 15px 0; border-bottom: 2px solid var(--dswd-red); position: absolute; width: 100%; left: 0; z-index: 999; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }

        /* Sidebar / Offcanvas */
        .offcanvas { border-left: 5px solid var(--dswd-red); }
        .menu-link { font-weight: 700; color: var(--slate); text-decoration: none; display: block; padding: 15px 20px; border-bottom: 1px solid #eee; text-transform: uppercase; font-size: 14px; }
        .menu-link:hover { background: var(--gov-gray); color: var(--dswd-red); }

        /* Content Sections */
        .hero-banner { background: linear-gradient(rgba(163, 0, 0, 0.9), rgba(163, 0, 0, 0.9)), url('https://www.transparenttextures.com/patterns/cubes.png'); color: white; padding: 60px 0; }
        .card-scam { border: 1px solid #eee; border-bottom: 4px solid #ddd; transition: 0.3s; height: 100%; border-radius: 0; background: #fff; cursor: pointer; }
        .card-scam:hover { border-bottom-color: var(--dswd-red); transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
        .card-title { font-weight: 800; color: var(--dswd-red); font-size: 1.1rem; text-transform: uppercase; }
        
        .page-view { display: none; }
        .active-view { display: block; animation: fadeIn 0.4s ease; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        footer { background: #1a1a1a; color: #ccc; padding: 40px 0; font-size: 13px; margin-top: 50px; }
        footer a { color: #ccc; text-decoration: none; }
        footer a:hover { color: #fff; text-decoration: underline; }

        /* Custom Modal Styles for Report */
        .report-modal-header { background: var(--dswd-red); color: white; }
        .prediction-box { background: #f8f9fa; border-left: 5px solid var(--dswd-red); padding: 15px; margin-bottom: 20px; }
        
        /* Modal Scrollable fix */
        .modal-body { max-height: 70vh; overflow-y: auto; }

        /* Section Styling inside Modal */
        .modal-info-section { margin-top: 20px; padding: 15px; background: #fff; border: 1px solid #eee; }
        .modal-info-section h6 { font-weight: 800; color: var(--dswd-red); text-transform: uppercase; margin-bottom: 10px; }

        /* About Page Specific Styling */
        .about-header { border-bottom: 2px solid #eee; padding-bottom: 20px; margin-bottom: 30px; }
        .back-link { cursor: pointer; color: var(--slate); font-weight: bold; text-decoration: none; display: inline-flex; align-items: center; gap: 5px; margin-bottom: 20px; }
        .back-link:hover { color: var(--dswd-red); }

        /* Required validation style */
        .is-invalid { border-color: #dc3545 !important; }
        .invalid-msg { color: #dc3545; font-size: 11px; display: none; margin-top: 4px; font-weight: bold; }
        
/* Submenu directly below parent */
.dropdown-submenu {
    position: relative; /* relative to parent li */
}

.dropdown-submenu > .submenu {
    display: none;
    position: absolute;
    top: 100%; /* directly below the parent link */
    left: 0;
    width: max-content; /* adjusts to content width */
    z-index: 9999;
    background-color: #fff;
    border: 1px solid rgba(0,0,0,.15);
    box-shadow: 0 0.5rem 1rem rgba(0,0,0,.175);
}

/* Show submenu on parent click */
.dropdown-submenu.show > .submenu {
    display: block;
}

/* Optional arrow icon for parent menu */
.submenu-toggle::after {
    content: "▶; /* Bootstrap chevron-down icon */
    font-family: "Bootstrap Icons";
    float: right;
    margin-left: 5px;
}


    </style>
</head>
<body>

    <div class="gov-bar">
        <div class="container d-flex justify-content-between">
            <div>
                <a href="#">GOV.PH</a>
                <a href="#" class="d-none d-sm-inline">Official Gazette</a>
            </div>
            <span class="fw-bold text-uppercase d-none d-md-inline" style="font-size: 10px; color: #777;">Republic of the Philippines</span>
        </div>
    </div>

    <header class="agency-header">
        <div class="container d-flex justify-content-between align-items-center flex-nowrap">
            <a href="#" class="d-flex align-items-center text-decoration-none" onclick="navigate('home')">
                <div class="me-2 me-md-3"><i class="bi bi-shield-fill-check fs-1 text-danger"></i></div>
                <div class="overflow-hidden">
                    <div class="agency-logo">SiyasatPH</div>
                    <div class="agency-sub">Offline-First Public Safety Portal</div>
                </div>
            </a>
            
            <div class="nav-tools">
                <nav class="desktop-nav">
                    <a href="#" onclick="navigate('home')">Home</a>
                    <a href="#" onclick="navigate('bulletins')">Bulletins</a>
                    <a href="#" onclick="navigate('audit')">Risk Audit</a>
                    <a href="#" onclick="navigate('hotlines')">Hotlines</a>
                </nav>

                <button class="tool-btn" onclick="toggleSearch()" title="Search Database">
                    <i class="bi bi-search"></i>
                </button>
                
                <button class="tool-btn burger-menu-btn" data-bs-toggle="offcanvas" data-bs-target="#sidebarMenu" title="Menu">
                    <i class="bi bi-list fs-2"></i>
                </button>
            </div>
        </div>

        <div id="searchWrapper">
            <div class="container">
                <div class="input-group">
                    <span class="input-group-text bg-white border-0"><i class="bi bi-search text-danger"></i></span>
                    <input type="text" id="dbSearch" class="form-control border-0 shadow-none" placeholder="Search Company or App Name...">
                    <button class="btn btn-outline-secondary border-0" onclick="toggleSearch()"><i class="bi bi-x-lg"></i></button>
                </div>
            </div>
        </div>
    </header>

    <div class="offcanvas offcanvas-end" id="sidebarMenu">
        <div class="offcanvas-header border-bottom">
            <h5 class="fw-bold m-0 text-danger text-uppercase">Portal Navigation</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
        </div>
        <div class="offcanvas-body p-0">
            <a href="#" class="menu-link" onclick="navigate('home')">Home</a>
            <a href="#" class="menu-link" onclick="navigate('bulletins')">Bulletins</a>
            <a href="#" class="menu-link" onclick="navigate('audit')">Risk Audit</a>
            <a href="#" class="menu-link" onclick="navigate('hotlines')">Hotlines</a>
        </div>
    </div>

    <main>
        <div id="view-home" class="page-view active-view">
            <section class="hero-banner">
                <div class="container text-center">
                    <h2 class="fw-bold display-6">SiyasatPH</h2>
                    <p class="lead">Always Accessible. Always Protected. Your offline-first defense against digital fraud.</p>
                </div>
            </section>

            <section class="container my-5">
                <div class="d-flex justify-content-between align-items-center mb-4 border-bottom pb-2">



    <h4 class="fw-bold m-0">ENFORCEMENT ADVISORIES</h4>

    <div class="d-flex align-items-center gap-2">
<!-- Connection Status -->
<div id="netStatus"
     class="fw-bold small text-uppercase ms-2"
     style="font-size:11px;">
    <i class="bi bi-circle-fill me-1"></i>
    <span id="netText">ONLINE</span>
</div>

        <span class="badge bg-danger rounded-0">UPDATED: JAN 23, 2026</span>
        
        

        <div class="dropdown">
            <button class="btn btn-sm btn-outline-danger rounded-0"
                data-bs-toggle="dropdown"
                title="Filter">

                <i class="bi bi-funnel-fill"></i>

            </button>

            <ul class="dropdown-menu dropdown-menu-end shadow-sm p-0">
    <!-- Existing filter items -->
    <li><a class="dropdown-item home-filter" data-type="all" href="#">All</a></li>
    <li><a class="dropdown-item home-filter" data-type="task" href="#">Task Scam</a></li>
    <li><a class="dropdown-item home-filter" data-type="trading" href="#">Trading</a></li>
    <li><a class="dropdown-item home-filter" data-type="invest" href="#">Investment</a></li>
    <li><a class="dropdown-item home-filter" data-type="ponzi" href="#">Ponzi</a></li>
    <li><a class="dropdown-item home-filter" data-type="lending" href="#">Lending</a></li>
    <li><a class="dropdown-item home-filter" data-type="fake" href="#">Fake / Impersonation</a></li>

    <li><hr class="dropdown-divider"></li>

    <!-- SORT OPTIONS -->
 <li class="dropdown-submenu">
    <a class="dropdown-item submenu-toggle" href="#">Sort by Date</a>
    <ul class="dropdown-menu submenu">
        <li><a class="dropdown-item sort-date" data-order="desc">Latest to Oldest</a></li>
        <li><a class="dropdown-item sort-date" data-order="asc">Oldest to Latest</a></li>
    </ul>
</li>

<li class="dropdown-submenu">
    <a class="dropdown-item submenu-toggle" href="#">Sort by Name</a>
    <ul class="dropdown-menu submenu">
        <li><a class="dropdown-item sort-name" data-order="asc">A - Z</a></li>
        <li><a class="dropdown-item sort-name" data-order="desc">Z - A</a></li>
    </ul>
</li>

</ul>

        </div>

    </div>

</div>


                <div id="scam-grid" class="row g-4"></div>
            </section>
        </div>

        <div id="view-bulletins" class="page-view container my-5">
            <div class="d-flex justify-content-between align-items-center border-bottom pb-2">

    <h3 class="fw-bold m-0">NATIONAL CDO BULLETIN</h3>

    <div class="dropdown">

        <button class="btn btn-sm btn-outline-danger rounded-0"
            data-bs-toggle="dropdown"
            title="Filter">

            <i class="bi bi-funnel-fill"></i>

        </button>

        <ul class="dropdown-menu dropdown-menu-end shadow-sm">
            <li><a class="dropdown-item bulletin-filter" data-type="all">All</a></li>
            <li><a class="dropdown-item bulletin-filter" data-type="task">Task Scam</a></li>
            <li><a class="dropdown-item bulletin-filter" data-type="trading">Trading</a></li>
            <li><a class="dropdown-item bulletin-filter" data-type="invest">Investment</a></li>
            <li><a class="dropdown-item bulletin-filter" data-type="ponzi">Ponzi</a></li>
            <li><a class="dropdown-item bulletin-filter" data-type="lending">Lending</a></li>
            <li><a class="dropdown-item bulletin-filter" data-type="fake">Fake / Impersonation</a></li>
    <li><hr class="dropdown-divider"></li>

    <!-- SORT OPTIONS -->
 <li class="dropdown-submenu">
    <a class="dropdown-item submenu-toggle" href="#">Sort by Date</a>
    <ul class="dropdown-menu submenu">
        <li><a class="dropdown-item bulletin-sort-date" data-order="desc" href="#">
    Newest to Oldest
</a></li>
        <li><a class="dropdown-item bulletin-sort-date" data-order="asc" href="#">
    Oldest to Newest
</a></li>
    </ul>
</li>

<li class="dropdown-submenu">
    <a class="dropdown-item submenu-toggle" href="#">Sort by Name</a>
    <ul class="dropdown-menu submenu">
        <li><a class="dropdown-item bulletin-sort-name" data-order="asc" href="#">
    A–Z
</a></li>
        <li><a class="dropdown-item bulletin-sort-name" data-order="desc" href="#">
    Z–A
</a></li>
    </ul>
</li>

        </ul>

    </div>

</div>

            <div class="table-responsive mt-4">
                <table class="table table-bordered table-hover shadow-sm">
                    <thead class="table-danger">
                        <tr>
                            <th>EFFECTIVE DATE</th>
                            <th>ENTITY NAME</th>
                            <th>REGULATORY ACTION</th>
                        </tr>
                    </thead>
                    <tbody id="bulletin-table"></tbody>
                </table>
            </div>
        </div>

        <div id="view-audit" class="page-view container my-5">
            <h3 class="fw-bold border-bottom pb-2">RISK ASSESSMENT TOOL</h3>
            <p class="text-muted">Select all observed behaviors to identify the type of scam.</p>
            
            <div class="row mt-4">
                <div class="col-lg-8 mx-auto">
                    <div class="card shadow-sm border-0 bg-light p-4 rounded-3">
                        
                        <div class="mb-3">
                            <label class="fw-bold small text-secondary">TARGET ENTITY / APP NAME <span class="text-danger">*</span>:</label>
                            <input type="text" id="targetName" class="form-control" placeholder="e.g. OHO, New Tasking App, Trading Bot...">
                            <div id="nameError" class="invalid-msg">ENTITY NAME IS REQUIRED BEFORE EVALUATION.</div>
                        </div>

                        <div class="bg-white p-3 border rounded mb-3">
                            <label class="fw-bold small text-danger mb-2 d-block text-uppercase">Check all that apply:</label>
                            
                            <div class="row g-2">
                                <div class="col-md-6">
                                    <label class="list-group-item p-2"><input class="form-check-input me-2 risk-check" value="No SEC License" data-type="general" type="checkbox"> No SEC License / Reg</label>
                                    <label class="list-group-item p-2"><input class="form-check-input me-2 risk-check" value="High Returns" data-type="ponzi" type="checkbox"> Guaranteed High Returns</label>
                                    <label class="list-group-item p-2"><input class="form-check-input me-2 risk-check" value="Recruitment" data-type="ponzi" type="checkbox"> Need to Invite to Earn</label>
                                    <label class="list-group-item p-2"><input class="form-check-input me-2 risk-check" value="Fake Tasks" data-type="task" type="checkbox"> Clicking/Liking Tasks</label>
                                    <label class="list-group-item p-2"><input class="form-check-input me-2 risk-check" value="VIP Fees" data-type="task" type="checkbox"> VIP Levels / Pay-to-Withdraw</label>
                                </div>
                                <div class="col-md-6">
                                    <label class="list-group-item p-2"><input class="form-check-input me-2 risk-check" value="Access Contacts" data-type="lending" type="checkbox"> App Asks to Read Contacts</label>
                                    <label class="list-group-item p-2"><input class="form-check-input me-2 risk-check" value="Harassment" data-type="lending" type="checkbox"> Harassment / Threats</label>
                                    <label class="list-group-item p-2"><input class="form-check-input me-2 risk-check" value="Fake Logos" data-type="fake" type="checkbox"> Use of Fake Gov't Logos</label>
                                    <label class="list-group-item p-2"><input class="form-check-input me-2 risk-check" value="Crypto Payment Only" data-type="general" type="checkbox"> GCash/Crypto Personal Accts</label>
                                    <label class="list-group-item p-2"><input class="form-check-input me-2 risk-check" value="Deepfake Ads" data-type="fake" type="checkbox"> Deepfake / AI Celebrity Ads</label>
                                </div>
                            </div>
                        </div>

                        <button onclick="calculateAndOpenModal()" class="btn btn-danger w-100 py-3 fw-bold text-uppercase shadow-sm">
                            <i class="bi bi-calculator me-2"></i> Evaluate
                        </button>

                    </div>
                </div>
            </div>
        </div>

        <div id="view-hotlines" class="page-view container my-5">
            <h3 class="fw-bold border-bottom pb-2 text-uppercase">Reporting Directory</h3>
            <div class="row g-4 mt-3">
                <div class="col-md-6">
                    <div class="card p-4 border-start border-danger border-4 shadow-sm border-0 bg-light">
                        <h5 class="fw-bold text-danger">IARC HOTLINE</h5>
                        <h2 class="fw-bold">1326</h2>
                        <p class="text-muted small">CICC official line for cybercrime and investment fraud reporting.</p>
                        <a href="tel:1326" class="btn btn-danger fw-bold rounded-0">CALL NOW</a>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card p-4 border-start border-primary border-4 shadow-sm border-0 bg-light">
                        <h5 class="fw-bold text-primary">PNP ACG</h5>
                        <h2 class="fw-bold">(02) 8414-1560</h2>
                        <p class="text-muted small">Philippine National Police Anti-Cybercrime Group investigation desk.</p>
                        <a href="tel:+63284141560" class="btn btn-primary fw-bold rounded-0">CONTACT</a>
                    </div>
                </div>
            </div>
        </div>

        <div id="view-about" class="page-view container my-5">
            <a onclick="navigate('home')" class="back-link"><i class="bi bi-arrow-left"></i> Back</a>
            <div class="about-header">
                <h1 class="fw-black display-5">About SiyasatPH</h1>
                <p class="lead text-muted">Transparency and Safety in the Philippine Digital Landscape.</p>
            </div>
            <div class="row">
                <div class="col-lg-8">
                    <section class="mb-5">
                        <h4 class="fw-bold text-danger">OUR MISSION</h4>
                        <p>SiyasatPH is a dedicated public safety initiative designed to provide Filipinos with an offline-first, real-time repository of verified enforcement actions. We aim to bridge the gap between regulatory transparency and public awareness by making "Cease and Desist" orders and advisory bulletins accessible to everyone, anywhere.</p>
                    </section>
                    <section class="mb-5">
                        <h4 class="fw-bold text-danger">HOW WE COLLECT INFO</h4>
                        <p>Our data is synchronized with the latest official releases from the <strong>Securities and Exchange Commission (SEC)</strong>, the <strong>Cybercrime Investigation and Coordinating Center (CICC)</strong>, and the <strong>National Privacy Commission (NPC)</strong>. We focus on identifying patterns of Ponzi schemes, illegal lending apps, and task-based scams affecting our local community.</p>
                    </section>
                    <section class="mb-5">
                        <h4 class="fw-bold text-danger">A COLLECTIVE DEFENSE</h4>
                        <p>By using the Risk Audit tool, users contribute to a growing database of digital threats. While we are an AI-assisted portal, our priority remains grounded in human safety and the protection of Filipino hard-earned assets.</p>
                    </section>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="container text-center text-md-start">
            <div class="row">
                <div class="col-md-6">
                    <h6 class="fw-bold text-white mb-3">SiyasatPH</h6>
                    <p class="text-secondary small">Providing real-time and offline-ready access to official SEC advisories and Cease and Desist orders to protect Filipino investors.</p>
                    <a href="javascript:void(0)" onclick="navigate('about')" class="small fw-bold text-danger">About SiyasatPH</a>
                    <button id="installBtn"
        class="btn btn-outline-danger btn-sm ms-3"
        style="display:none;">
    <i class="bi bi-phone"></i> Add to Home Screen
</button>

                </div>
                <div class="col-md-6 text-md-end">
                    <p class="small text-secondary mb-0">Synchronized with SEC Office of the General Counsel</p>
                    <p class="small text-secondary">CICC Cybercrime Monitoring Division</p>
                </div>
            </div>
            <hr class="border-secondary my-4">
            <p class="text-center small text-secondary mb-0">© 2026 SiyasatPH | Public Safety Verification Project</p>
        </div>
    </footer>

    <div class="modal fade" id="reportModal" tabindex="-1" data-bs-backdrop="static">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content border-0 shadow-lg rounded-3">
                <div class="modal-header report-modal-header">
                    <h5 class="modal-title fw-bold"><i class="bi bi-shield-lock-fill me-2"></i>RISK ANALYSIS REPORT</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body p-4">
                    
                    <div class="prediction-box">
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <span class="fw-bold text-uppercase text-secondary" style="font-size: 0.8rem;">Calculated Risk:</span>
                            <span id="res-percent" class="display-6 fw-bold text-danger">0%</span>
                        </div>
                        <div class="progress mb-3" style="height: 10px;">
                            <div id="res-bar" class="progress-bar bg-danger" role="progressbar" style="width: 0%"></div>
                        </div>
                        <h5 class="fw-bold text-danger mb-1">PREDICTED CATEGORY:</h5>
                        <h4 id="res-category" class="fw-bold text-dark mb-0">--</h4>
                    </div>

                    <div class="modal-info-section shadow-sm rounded">
                        <h6 id="label-what-is">What is this scam?</h6>
                        <p id="info-what-is" class="small text-muted mb-0">--</p>
                    </div>

                    <div class="modal-info-section shadow-sm rounded">
                        <h6>How to stay safe / Prevention tips:</h6>
                        <p id="info-prevention" class="small text-muted mb-0">--</p>
                    </div>

                    <div class="modal-info-section shadow-sm rounded">
                        <h6>Instructions on how to report:</h6>
                        <p id="info-reporting" class="small text-muted mb-0">--</p>
                    </div>

                    <div class="mt-4 mb-2">
                        <label class="fw-bold small text-secondary">ADDITIONAL DETAILS / EVIDENCE (OPTIONAL):</label>
                        <textarea id="modalEvidence" class="form-control bg-light" rows="3" placeholder="Paste links, screenshots descriptions, or specific GCash numbers..."></textarea>
                    </div>

                </div>
                <div class="modal-footer border-0 pt-0">
                    <button onclick="sendFinalReport()" class="btn btn-danger w-100 py-3 fw-bold text-uppercase shadow">
                        <i class="bi bi-envelope-check-fill me-2"></i> Report Now via Email
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="infoModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content border-0 rounded-0 shadow-lg">
                <div class="modal-header rounded-0 bg-danger text-white">
                    <h6 class="modal-title fw-bold text-uppercase">Enforcement Detail Record</h6>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body p-4">
                    <h2 id="m-name" class="fw-bold text-danger mb-1">--</h2>
                    <span id="m-type" class="badge bg-dark rounded-0 mb-3">--</span>
                    <hr>
                    <p class="small fw-bold text-muted mb-1 text-uppercase">Modus Operandi:</p>
                    <p id="m-modus" class="text-secondary mb-4">--</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Scam Guide Modal -->
<div class="modal fade" id="scamGuideModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content border-0 shadow-lg rounded-3">

            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title fw-bold" id="guide-title">
                    How to Spot This Scam
                </h5>
                <button type="button"
                        class="btn-close btn-close-white"
                        data-bs-dismiss="modal"></button>
            </div>

            <div class="modal-body p-4">

                <p id="guide-description"
                   class="text-muted mb-3">
                   --
                </p>

                <h6 class="fw-bold text-danger text-uppercase">
                    Warning Signs
                </h6>

                <ul id="guide-signs" class="small">
                </ul>

                <h6 class="fw-bold text-danger text-uppercase mt-3">
                    What You Should Do
                </h6>

                <p id="guide-action" class="small text-muted">
                    --
                </p>

            </div>

        </div>
    </div>
</div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- SAME HEADER / BODY / DESIGN ABOVE (UNCHANGED) -->

<script>
    const db = [
        { date: "Jan 19, 2026", name: "DE GUZMAN CONSUMER GOODS", type: "Ponzi Scheme", modus: "Promised 200% ROI in 60 days via fake pet breeding and rice trading." },
        { date: "Jan 12, 2026", name: "EXNESS GLOBAL (HFM)", type: "Unauthorized Broker", modus: "Advisory issued for soliciting investments without secondary license." },
        { date: "Jan 08, 2026", name: "LS KBS CRYPTO", type: "Investment Fraud", modus: "Crypto humanitarian-themed scam using recruitment cycles." },
        { date: "Jan 04, 2026", name: "AYALA INVESTMENTS AI", type: "Impersonation", modus: "Uses deepfake technology to impersonate Ayala Corp officials." },
        { date: "Dec 15, 2025", name: "MAGIC PESO", type: "Illegal Lending", modus: "Operating without OLP registration. Flagged for harassment." },

        /* ✅ UPDATED OHO ENTRY */
        {
            date: "Oct 20, 2025",
            name: "OHO INVESTMENT PH",
            type: "Task & Job Offer Scam",
            modus: "SEC-flagged scheme posing as an online job where users complete tasks and are required to deposit money to unlock withdrawals."
        }
    ];

    $(document).ready(() => {
        renderHome(db);
        renderBulletin(db);
    });

    function navigate(id) {
        $('.page-view').removeClass('active-view');
        $(`#view-${id}`).addClass('active-view');
        const offcanvasElement = document.getElementById('sidebarMenu');
        const offcanvas = bootstrap.Offcanvas.getInstance(offcanvasElement);
        if (offcanvas) offcanvas.hide();
        window.scrollTo(0,0);
    }

    function toggleSearch() {
        $('#searchWrapper').slideToggle(200);
        $('#dbSearch').focus();
    }

    /* ✅ SEARCH STILL WORKS FOR JOB + TASK */
    $('#dbSearch').on('input', function() {
        let v = $(this).val().toLowerCase();
        renderHome(
            db.filter(i =>
                i.name.toLowerCase().includes(v) ||
                i.type.toLowerCase().includes(v)
            )
        );
    });
    
// SUBMENU HANDLING (MOBILE + DESKTOP FIX)
// SUBMENU FIX (PREVENT CLOSE ON CLICK)
$(document).on('click', '.submenu-toggle', function (e) {

    e.preventDefault();
    e.stopImmediatePropagation(); // stronger than stopPropagation

    let parent = $(this).closest('.dropdown-submenu');

    // Close other submenus first
    parent
        .siblings('.dropdown-submenu')
        .removeClass('show');

    // Toggle this submenu
    parent.toggleClass('show');
});



// Sort functionality
$('.sort-option').on('click', function(e){
    e.preventDefault();
    const sortType = $(this).data('sort');
    const page = $('.page-view.active-view').attr('id').includes('bulletin') ? 'bulletin' : 'home';
    
    let items = [...db];
    
    // Apply current filter if any
    const activeFilter = page === 'home' ? $('.home-filter.active')?.data('type') : $('.bulletin-filter.active')?.data('type');
    if(activeFilter && activeFilter !== 'all') {
        items = items.filter(i => filterMap[page][activeFilter].includes(i.type));
    }

    switch(sortType){
        case 'date-desc': items.sort((a,b)=> new Date(b.date) - new Date(a.date)); break;
        case 'date-asc': items.sort((a,b)=> new Date(a.date) - new Date(b.date)); break;
        case 'name-asc': items.sort((a,b)=> a.name.localeCompare(b.name)); break;
        case 'name-desc': items.sort((a,b)=> b.name.localeCompare(a.name)); break;
    }

    if(page==='home') renderHome(items);
    else renderBulletin(items);

    // Close all dropdowns after selection
    $('.dropdown-submenu').removeClass('show');
    $('.dropdown-menu').removeClass('show');
});

// HOME SORT (DATE)
$(document).on('click', '.sort-date', function (e) {
    e.preventDefault();

    let order = $(this).data('order');
    let items = [...db];

    items.sort((a, b) => {
        return order === 'desc'
            ? new Date(b.date) - new Date(a.date)
            : new Date(a.date) - new Date(b.date);
    });

    renderHome(items);

    $('.dropdown-submenu').removeClass('show');
});

// HOME SORT (NAME)
$(document).on('click', '.sort-name', function (e) {
    e.preventDefault();

    let order = $(this).data('order');
    let items = [...db];

    items.sort((a, b) => {
        return order === 'asc'
            ? a.name.localeCompare(b.name)
            : b.name.localeCompare(a.name);
    });

    renderHome(items);

    $('.dropdown-submenu').removeClass('show');
});

    
    const filterMap = {
    home: {
        task: ["Task & Job Offer Scam"],
        trading: ["Unauthorized Broker"],
        invest: ["Investment Fraud"],
        ponzi: ["Ponzi Scheme"],
        lending: ["Illegal Lending"],
        fake: ["Impersonation", "AI Fake Fraud"],
        all: [] // matches everything
    },
    bulletin: {
        task: ["Task & Job Offer Scam"],
        trading: ["Unauthorized Broker"],
        invest: ["Investment Fraud"],
        ponzi: ["Ponzi Scheme"],
        lending: ["Illegal Lending"],
        fake: ["Impersonation", "AI Fake Fraud"],
        all: []
    }
};

// HOME FILTER
$('.home-filter').on('click', function () {
    let type = $(this).data('type');

    if(type === "all") {
        renderHome(db);
        return;
    }

    renderHome(db.filter(i => filterMap.home[type].includes(i.type)));
});

// BULLETINS SORT (DATE)
$(document).on('click', '.bulletin-sort-date', function (e) {

    e.preventDefault();
    e.stopPropagation(); // keep dropdown open

    let order = $(this).data('order');
    let items = [...bulletinsDB]; // your bulletin data

    items.sort((a, b) => {
        return order === 'desc'
            ? new Date(b.date) - new Date(a.date)
            : new Date(a.date) - new Date(b.date);
    });

    renderBulletins(items);
});


// BULLETINS SORT (NAME)
$(document).on('click', '.bulletin-sort-name', function (e) {

    e.preventDefault();
    e.stopPropagation(); // keep dropdown open

    let order = $(this).data('order');
    let items = [...bulletinsDB];

    items.sort((a, b) => {
        return order === 'asc'
            ? a.title.localeCompare(b.title)
            : b.title.localeCompare(a.title);
    });

    renderBulletins(items);
});

// BULLETIN FILTER
$('.bulletin-filter').on('click', function () {
    let type = $(this).data('type');

    if(type === "all") {
        renderBulletin(db);
        return;
    }

    renderBulletin(db.filter(i => filterMap.bulletin[type].includes(i.type)));
});



    function renderHome(items) {
        const g = $('#scam-grid');
        g.empty();
        items.forEach(i => {
            g.append(`
                <div class="col-md-6 col-lg-4">
                    <div class="card card-scam p-4 shadow-sm" onclick="showInfo('${i.name}')">
                        <small class="text-danger fw-bold text-uppercase">${i.type}</small>
                        <h5 class="card-title my-2">${i.name}</h5>
                        <p class="small text-muted mb-0">
                            <i class="bi bi-calendar-check me-1"></i> Advisory: ${i.date}
                        </p>
                    </div>
                </div>
            `);
        });
    }

    function renderBulletin(items) {
    const t = $('#bulletin-table');
    t.empty();

    items.forEach(i => {
        t.append(`
            <tr>
                <td>${i.date}</td>
                <td class="fw-bold text-primary"
                    style="cursor:pointer"
                    onclick="openScamGuide('${i.type}')">
                    ${i.name}
                </td>
                <td class="text-danger fw-bold text-uppercase">${i.type}</td>
            </tr>
        `);
    });
}


    function showInfo(name) {
        const item = db.find(x => x.name === name);
        if (item) {
            $('#m-name').text(item.name);
            $('#m-type').text(item.type);
            $('#m-modus').text(item.modus);

            const infoModal = new bootstrap.Modal(document.getElementById('infoModal'));
            infoModal.show();
        }
    }

    /* ✅ UPDATED PROFILES (JOB ADDED, NO UI CHANGE) */
    const scamProfiles = {

        ponzi: {
            title: "Ponzi / Pyramid Scheme",
            whatIs: "A fraudulent investment operation where returns are paid using money from new recruits.",
            prevention: "Avoid guaranteed profits. Verify SEC license.",
            reporting: "Report to SEC Enforcement Division."
        },

        task: {
            title: "Tasking / Clicking Scam",
            whatIs: "Victims perform fake tasks and pay fees to withdraw earnings.",
            prevention: "Never pay to receive salary.",
            reporting: "Report to CICC."
        },

        job: {
            title: "Fraudulent Job Offer Scam",
            whatIs: "Fake employers require deposits, activation fees, or tasks before releasing salary.",
            prevention: "Legitimate jobs never require payment.",
            reporting: "Report to SEC and CICC."
        },

        lending: {
            title: "Illegal Lending / OLA Harassment",
            whatIs: "Unregistered loan apps using threats.",
            prevention: "Do not give contact access.",
            reporting: "Report to NPC and SEC."
        },

        fake: {
            title: "Impersonation / AI Fake Fraud",
            whatIs: "Deepfake and fake endorsements.",
            prevention: "Verify official sources.",
            reporting: "Report to PNP-ACG."
        },

        general: {
            title: "General Investment Fraud",
            whatIs: "Illegal fundraising without authority.",
            prevention: "Verify registration.",
            reporting: "Report to SEC."
        }
    };
    
    const scamGuides = {

    "Ponzi Scheme": {
        title: "How to Spot a Ponzi Scheme",
        desc: "Ponzi schemes promise unrealistic profits and pay old investors using new victims' money.",

        signs: [
            "Guaranteed high returns",
            "No clear business model",
            "Pressure to recruit others",
            "No SEC registration",
            "No financial transparency"
        ],

        action: "Stop investing immediately and report the scheme to the SEC and CICC."
    },

    "Task & Job Offer Scam": {
        title: "How to Spot a Task / Job Scam",
        desc: "These scams ask victims to complete fake tasks and pay fees before withdrawal.",

        signs: [
            "You need to pay to withdraw",
            "VIP levels required",
            "Tasks give unrealistic rewards",
            "Uses Telegram/WhatsApp only",
            "No official company address"
        ],

        action: "Never send money. Block the contact and report to authorities."
    },

    "Investment Fraud": {
        title: "How to Spot Investment Fraud",
        desc: "Fraudulent investments collect funds without legal authority.",

        signs: [
            "No secondary license",
            "Secretive operations",
            "Uses personal accounts",
            "Promises fixed income",
            "No legal documents"
        ],

        action: "Verify registration with SEC before investing."
    },

    "Unauthorized Broker": {
        title: "How to Spot Unauthorized Brokers",
        desc: "Unlicensed brokers illegally solicit investments.",

        signs: [
            "Not listed on SEC website",
            "No trading license",
            "Fake trading platforms",
            "Unverified apps",
            "Hidden fees"
        ],

        action: "Do not trade. Report to SEC immediately."
    },

    "Illegal Lending": {
        title: "How to Spot Illegal Lending Apps",
        desc: "Illegal lenders harass borrowers and access contacts.",

        signs: [
            "Asks for contact permission",
            "Threatening messages",
            "Public shaming",
            "No OLP license",
            "High interest rates"
        ],

        action: "Report to NPC and SEC. Do not engage."
    },

    "Impersonation": {
        title: "How to Spot Impersonation Scams",
        desc: "Scammers pretend to be government or famous companies.",

        signs: [
            "Fake logos",
            "Deepfake videos",
            "Unofficial links",
            "Requests payment",
            "Unverified pages"
        ],

        action: "Verify official sources. Do not send money."
    }
};

function openScamGuide(type) {

    const guide = scamGuides[type];

    if (!guide) {
        alert("No guide available for this scam type yet.");
        return;
    }

    $('#guide-title').text(guide.title);
    $('#guide-description').text(guide.desc);
    $('#guide-action').text(guide.action);

    const signsList = $('#guide-signs');
    signsList.empty();

    guide.signs.forEach(s => {
        signsList.append(`<li>${s}</li>`);
    });

    const modal =
        new bootstrap.Modal(document.getElementById('scamGuideModal'));

    modal.show();
}


    function calculateAndOpenModal() {

        const nameField = document.getElementById('targetName');
        const errorMsg = document.getElementById('nameError');
        const checkedBoxes = document.querySelectorAll('.risk-check:checked');

        if (nameField.value.trim() === "") {
            nameField.classList.add('is-invalid');
            errorMsg.style.display = 'block';
            nameField.focus();
            return;
        } else {
            nameField.classList.remove('is-invalid');
            errorMsg.style.display = 'none';
        }

        if (checkedBoxes.length === 0) {
            alert("Please select at least one indicator.");
            return;
        }

        const count = checkedBoxes.length;
        const percent = Math.min((count / 5) * 100, 100);

        let types = {
            ponzi: 0,
            task: 0,
            lending: 0,
            fake: 0,
            general: 0
        };

        checkedBoxes.forEach(box => {
            let t = box.getAttribute('data-type');
            if (types[t] !== undefined) types[t]++;
        });

        let selectedProfile = scamProfiles.general;

        if (types.lending > 0) selectedProfile = scamProfiles.lending;
        else if (types.task > 0) selectedProfile = scamProfiles.task;
        else if (types.ponzi > 0) selectedProfile = scamProfiles.ponzi;
        else if (types.fake > 0) selectedProfile = scamProfiles.fake;

        document.getElementById('res-percent').innerText = Math.round(percent) + "%";
        document.getElementById('res-bar').style.width = percent + "%";
        document.getElementById('res-category').innerText = selectedProfile.title;

        document.getElementById('label-what-is').innerText =
            "What is a " + selectedProfile.title + "?";

        document.getElementById('info-what-is').innerText =
            selectedProfile.whatIs;

        document.getElementById('info-prevention').innerText =
            selectedProfile.prevention;

        document.getElementById('info-reporting').innerText =
            selectedProfile.reporting;

        const reportModal =
            new bootstrap.Modal(document.getElementById('reportModal'));

        reportModal.show();
    }

    function updateNetworkStatus() {
        const statusEl = document.getElementById('netStatus');
        const textEl = document.getElementById('netText');
        const icon = statusEl.querySelector('i');

        // reset colors
        statusEl.classList.remove('text-success', 'text-danger');
        icon.classList.remove('text-success', 'text-danger');

        if (navigator.onLine) {
            textEl.textContent = 'ONLINE';
            statusEl.classList.add('text-success'); // green
            icon.classList.add('text-success');    // green
        } else {
            textEl.textContent = 'OFFLINE';
            statusEl.classList.add('text-danger'); // red
            icon.classList.add('text-danger');     // red
        }
    }

    updateNetworkStatus();
    window.addEventListener('online', updateNetworkStatus);
    window.addEventListener('offline', updateNetworkStatus);



    function sendFinalReport() {

        const name = document.getElementById('targetName').value;
        const evidence = document.getElementById('modalEvidence').value || "No additional notes provided.";
        const category = document.getElementById('res-category').innerText;
        const percent = document.getElementById('res-percent').innerText;

        let flags = "";

        document.querySelectorAll('.risk-check:checked').forEach(box => {
            flags += `[x] ${box.value}\n`;
        });

        let recipient = "epd@sec.gov.ph";
        let cc = "complaints@cicc.gov.ph";

        if (category.includes("Lending"))
            recipient = "inquiries@privacy.gov.ph";

        const subject = `REPORT: ${category} - ${name}`;

        const bodyText =
`TO: ENFORCEMENT DIVISION

I am reporting ${name} which matches ${category} (${percent}).

DETECTED INDICATORS:
${flags}

USER NOTES:
${evidence}

Generated via SiyasatPH (2026)`;

        window.location.href =
            "mailto:" + recipient +
            "?cc=" + cc +
            "&subject=" + encodeURIComponent(subject) +
            "&body=" + encodeURIComponent(bodyText);
    }
    
    let deferredPrompt;
    const installBtn = document.getElementById('installBtn');

    window.addEventListener('beforeinstallprompt', (e) => {
        e.preventDefault();
        deferredPrompt = e;
        installBtn.style.display = 'inline-block';
    });

    installBtn.addEventListener('click', async () => {
        if (!deferredPrompt) return;

        deferredPrompt.prompt();
        await deferredPrompt.userChoice;

        deferredPrompt = null;
        installBtn.style.display = 'none';
    });

    window.addEventListener('appinstalled', () => {
        installBtn.style.display = 'none';
    });

</script>
</body>
</html>
